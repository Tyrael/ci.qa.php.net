<?xml version="1.0" encoding="UTF-8"?>

<project name="ci.qa.php.net" default="build">

<property environment="MyEnv" />

<target name="clean" description="Cleanup build artifacts">
  <exec executable="./vcsclean" failonerror="true" />
</target>

 <target name="build" depends="clean">
  <exec executable="./buildconf" failonerror="true" />
  <exec executable="./configure" failonerror="true" />
  <exec executable="make" failonerror="true">
   <arg value="--quiet" />
  </exec>
 </target>

 <target name="test">
  <exec executable="./sapi/cli/php" failonerror="true">
   <env key="TEST_PHP_EXECUTABLE" value="auto" />
   <env key="NO_INTERACTION" value="1" />
   <env key="TEST_PHP_JUNIT" value="${MyEnv.WORKSPACE}/junit.xml" />
   <arg value="run-tests.php" />
   <arg value="-n" />
   <arg value="-c" />
   <arg path="tmp-php.ini" />
   <arg value="-d" />
   <arg value="extension_dir=modules" />
  </exec>
 </target>
</project>
